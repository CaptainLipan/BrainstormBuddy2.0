{"ast":null,"code":"var _jsxFileName = \"/Users/honzik/WebstormProjects/BrainstormBuddy2.0/client/src/components/mainbar/posts/Posts.tsx\",\n  _s = $RefreshSig$();\n// src/components/mainbar/posts/Posts.tsx\nimport React, { useState, useEffect } from 'react';\nimport { getCommentsForPost, postComment, fetchPostsByFilter } from '../../../api/api';\n// Adjust the path based on your project structure\n// Adjust the path based on your project structure\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Posts = ({\n  currentFilter\n}) => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [localPost, setLocalPost] = useState(null);\n  const [newCommentText, setNewCommentText] = useState('');\n  const userId = 'user-id'; // Replace with actual user ID\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const filteredPosts = await fetchPostsByFilter(currentFilter);\n      setPosts(filteredPosts);\n    };\n    fetchPosts();\n  }, [currentFilter]); // Re-fetch posts when the filter changes\n\n  const toggleComments = async postId => {\n    const post = posts.find(p => p._id === postId);\n    if (!post) return;\n    if (!post.showComments && post._comments.length === 0) {\n      const comments = await getCommentsForPost(post._id);\n      setLocalPost(prevPost => {\n        if (!prevPost) return null;\n        return {\n          ...prevPost,\n          _comments: comments,\n          showComments: !prevPost.showComments\n        };\n      });\n    } else {\n      setLocalPost(prevPost => {\n        if (!prevPost) return null;\n        return {\n          ...prevPost,\n          showComments: !prevPost.showComments\n        };\n      });\n    }\n  };\n  const handleCommentSubmit = async postId => {\n    if (!localPost || !newCommentText.trim()) return;\n    try {\n      const newComment = await postComment(newCommentText, postId, userId);\n      setLocalPost(prevPost => {\n        if (!prevPost) return null;\n        return {\n          ...prevPost,\n          _comments: [...prevPost._comments, newComment],\n          showComments: true\n        };\n      });\n      setPosts(prevPosts => prevPosts.map(p => p._id === postId ? {\n        ...p,\n        _comments: [...p._comments, newComment]\n      } : p));\n    } catch (error) {\n      console.error('Error posting comment:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: post.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => toggleComments(post._id),\n        children: post.showComments ? 'Hide Comments' : 'Show Comments'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }, this), post.showComments && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [post._comments.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: comment.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: comment._creator.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 37\n          }, this)]\n        }, comment._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 33\n        }, this)), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: newCommentText,\n          onChange: e => setNewCommentText(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleCommentSubmit(post._id),\n          children: \"Add Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }, this)]\n    }, post._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n_s(Posts, \"Lzvfi6SEG8X2tpAsGdNzNjlUWvM=\");\n_c = Posts;\nexport default Posts;\nvar _c;\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"names":["React","useState","useEffect","getCommentsForPost","postComment","fetchPostsByFilter","jsxDEV","_jsxDEV","Posts","currentFilter","_s","posts","setPosts","localPost","setLocalPost","newCommentText","setNewCommentText","userId","fetchPosts","filteredPosts","toggleComments","postId","post","find","p","_id","showComments","_comments","length","comments","prevPost","handleCommentSubmit","trim","newComment","prevPosts","map","error","console","children","title","fileName","_jsxFileName","lineNumber","columnNumber","text","onClick","comment","_creator","username","value","onChange","e","target","_c","$RefreshReg$"],"sources":["/Users/honzik/WebstormProjects/BrainstormBuddy2.0/client/src/components/mainbar/posts/Posts.tsx"],"sourcesContent":["// src/components/mainbar/posts/Posts.tsx\nimport React, { useState, useEffect } from 'react';\nimport { getCommentsForPost, postComment, fetchPostsByFilter } from '../../../api/api';\nimport { Post } from '../../../models/post/PostModel';  // Adjust the path based on your project structure\nimport { CommentData } from '../../../models/comment/CommentModel';  // Adjust the path based on your project structure\n\ninterface PostsProps {\n    currentFilter: string; // Define the type for the prop\n}\n\nconst Posts: React.FC<PostsProps> = ({ currentFilter }) => {\n    const [posts, setPosts] = useState<Post[]>([]);\n    const [localPost, setLocalPost] = useState<Post | null>(null);\n    const [newCommentText, setNewCommentText] = useState('');\n    const userId = 'user-id'; // Replace with actual user ID\n\n    useEffect(() => {\n        const fetchPosts = async () => {\n            const filteredPosts = await fetchPostsByFilter(currentFilter);\n            setPosts(filteredPosts);\n        };\n\n        fetchPosts();\n    }, [currentFilter]); // Re-fetch posts when the filter changes\n\n    const toggleComments = async (postId: string) => {\n        const post = posts.find(p => p._id === postId);\n        if (!post) return;\n\n        if (!post.showComments && post._comments.length === 0) {\n            const comments = await getCommentsForPost(post._id);\n            setLocalPost(prevPost => {\n                if (!prevPost) return null;\n                return { ...prevPost, _comments: comments, showComments: !prevPost.showComments };\n            });\n        } else {\n            setLocalPost(prevPost => {\n                if (!prevPost) return null;\n                return { ...prevPost, showComments: !prevPost.showComments };\n            });\n        }\n    };\n\n    const handleCommentSubmit = async (postId: string) => {\n        if (!localPost || !newCommentText.trim()) return;\n\n        try {\n            const newComment: CommentData = await postComment(newCommentText, postId, userId);\n            setLocalPost(prevPost => {\n                if (!prevPost) return null;\n                return {\n                    ...prevPost,\n                    _comments: [...prevPost._comments, newComment],\n                    showComments: true,\n                };\n            });\n\n            setPosts(prevPosts => prevPosts.map(p =>\n                p._id === postId ? { ...p, _comments: [...p._comments, newComment] } : p\n            ));\n        } catch (error) {\n            console.error('Error posting comment:', error);\n        }\n    };\n\n    return (\n        <div>\n            {posts.map(post => (\n                <div key={post._id}>\n                    <h2>{post.title}</h2>\n                    <p>{post.text}</p>\n                    <button onClick={() => toggleComments(post._id)}>\n                        {post.showComments ? 'Hide Comments' : 'Show Comments'}\n                    </button>\n                    {post.showComments && (\n                        <div>\n                            {post._comments.map(comment => (\n                                <div key={comment._id}>\n                                    <p>{comment.text}</p>\n                                    <small>{comment._creator.username}</small>\n                                </div>\n                            ))}\n                            <textarea\n                                value={newCommentText}\n                                onChange={(e) => setNewCommentText(e.target.value)}\n                            />\n                            <button onClick={() => handleCommentSubmit(post._id)}>Add Comment</button>\n                        </div>\n                    )}\n                </div>\n            ))}\n        </div>\n    );\n};\n\nexport default Posts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}