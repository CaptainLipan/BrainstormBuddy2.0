{"ast":null,"code":"// src/components/mainbar/posts/handleVote.ts\nimport { toggleVote } from '../../../api/api';\nexport const handleVote = async (post, setPost, type) => {\n  const userString = localStorage.getItem('user');\n  if (!userString) {\n    alert(\"You need to be logged in to vote.\");\n    return;\n  }\n  const user = JSON.parse(userString);\n  const userId = user._id;\n  try {\n    const response = await toggleVote('post', post._id, type, userId);\n    if (response.data.success) {\n      var _response$data$netVot, _response$data$upvote, _response$data$downvo;\n      const updatedPost = {\n        ...post,\n        upvotes: (_response$data$netVot = response.data.netVotes) !== null && _response$data$netVot !== void 0 ? _response$data$netVot : post.upvotes,\n        upvoted: (_response$data$upvote = response.data.upvoted) !== null && _response$data$upvote !== void 0 ? _response$data$upvote : false,\n        downvoted: (_response$data$downvo = response.data.downvoted) !== null && _response$data$downvo !== void 0 ? _response$data$downvo : false\n      };\n      setPost(updatedPost);\n    } else {\n      alert(response.data.message);\n    }\n  } catch (error) {\n    alert(\"Failed to execute vote operation: \" + error.message);\n  }\n};","map":{"version":3,"names":["toggleVote","handleVote","post","setPost","type","userString","localStorage","getItem","alert","user","JSON","parse","userId","_id","response","data","success","_response$data$netVot","_response$data$upvote","_response$data$downvo","updatedPost","upvotes","netVotes","upvoted","downvoted","message","error"],"sources":["/Users/honzik/WebstormProjects/BrainstormBuddy2.0/client/src/components/mainbar/posts/handleVote.ts"],"sourcesContent":["// src/components/mainbar/posts/handleVote.ts\nimport { toggleVote } from '../../../api/api';\nimport { PostWithCommentsCount } from '../../../models/post/PostModel';\n\nexport const handleVote = async (\n    post: PostWithCommentsCount,\n    setPost: React.Dispatch<React.SetStateAction<PostWithCommentsCount>>,\n    type: 'upvote' | 'downvote',\n): Promise<void> => {\n    const userString = localStorage.getItem('user');\n    if (!userString) {\n        alert(\"You need to be logged in to vote.\");\n        return;\n    }\n    const user = JSON.parse(userString);\n\n    const userId = user._id;\n    try {\n        const response = await toggleVote('post', post._id, type, userId);\n\n        if (response.data.success) {\n            const updatedPost = {\n                ...post,\n                upvotes: response.data.netVotes ?? post.upvotes,\n                upvoted: response.data.upvoted ?? false,\n                downvoted: response.data.downvoted ?? false\n            };\n            setPost(updatedPost);\n        } else {\n            alert(response.data.message);\n        }\n    } catch (error: any) {\n        alert(\"Failed to execute vote operation: \" + error.message);\n    }\n};\n"],"mappings":"AAAA;AACA,SAASA,UAAU,QAAQ,kBAAkB;AAG7C,OAAO,MAAMC,UAAU,GAAG,MAAAA,CACtBC,IAA2B,EAC3BC,OAAoE,EACpEC,IAA2B,KACX;EAChB,MAAMC,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EAC/C,IAAI,CAACF,UAAU,EAAE;IACbG,KAAK,CAAC,mCAAmC,CAAC;IAC1C;EACJ;EACA,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACN,UAAU,CAAC;EAEnC,MAAMO,MAAM,GAAGH,IAAI,CAACI,GAAG;EACvB,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMd,UAAU,CAAC,MAAM,EAAEE,IAAI,CAACW,GAAG,EAAET,IAAI,EAAEQ,MAAM,CAAC;IAEjE,IAAIE,QAAQ,CAACC,IAAI,CAACC,OAAO,EAAE;MAAA,IAAAC,qBAAA,EAAAC,qBAAA,EAAAC,qBAAA;MACvB,MAAMC,WAAW,GAAG;QAChB,GAAGlB,IAAI;QACPmB,OAAO,GAAAJ,qBAAA,GAAEH,QAAQ,CAACC,IAAI,CAACO,QAAQ,cAAAL,qBAAA,cAAAA,qBAAA,GAAIf,IAAI,CAACmB,OAAO;QAC/CE,OAAO,GAAAL,qBAAA,GAAEJ,QAAQ,CAACC,IAAI,CAACQ,OAAO,cAAAL,qBAAA,cAAAA,qBAAA,GAAI,KAAK;QACvCM,SAAS,GAAAL,qBAAA,GAAEL,QAAQ,CAACC,IAAI,CAACS,SAAS,cAAAL,qBAAA,cAAAA,qBAAA,GAAI;MAC1C,CAAC;MACDhB,OAAO,CAACiB,WAAW,CAAC;IACxB,CAAC,MAAM;MACHZ,KAAK,CAACM,QAAQ,CAACC,IAAI,CAACU,OAAO,CAAC;IAChC;EACJ,CAAC,CAAC,OAAOC,KAAU,EAAE;IACjBlB,KAAK,CAAC,oCAAoC,GAAGkB,KAAK,CAACD,OAAO,CAAC;EAC/D;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}